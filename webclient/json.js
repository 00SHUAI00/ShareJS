var e=void 0,n=null;
(function(){var l,m,o,g,p;m=window.sharejs;p=typeof!0!=="undefined"?m.types.text:require("./text");g={name:"json",create:function(){return n},g:function(c){var a;a={p:c.p};c.si!==e&&(a.sd=c.si);c.sd!==e&&(a.si=c.sd);c.oi!==e&&(a.od=c.oi);c.od!==e&&(a.oi=c.od);c.li!==e&&(a.ld=c.li);c.ld!==e&&(a.li=c.ld);c.na!==e&&(a.na=-c.na);if(c.lm!==e)a.lm=c.p[c.p.length-1],a.p=c.p.slice(0,c.p.length-1).concat([c.lm]);return a}};g.invert=g.m=function(c){var a,b,i,f;i=c.slice().reverse();f=[];for(a=0,b=i.length;a<
b;a++)c=i[a],f.push(g.g(c));return f};g.c=function(){};o=function(c){return Object.prototype.toString.call(c)==="[object Array]"};g.a=function(c){if(!o(c))throw Error("Referenced element not a list");};g.b=function(c){if(c.constructor!==Object)throw Error("Referenced element not an object (it was "+JSON.stringify(c)+")");};g.apply=g.apply=function(c,a){var b,i,f,d,k,h,j,q,r,m,o,p,s,a=l(a);i={data:l(c)};try{for(k=0,o=a.length;k<o;k++){b=a[k];r=q=n;d=i;h="data";s=b.p;for(m=0,p=s.length;m<p;m++)if(j=
s[m],q=d,r=h,d=d[h],h=j,q==n)throw Error("Path invalid");if(b.na!==e){if(typeof d[h]!=="number")throw Error("Referenced element not a number");d[h]+=b.na}else if(b.si!==e){if(typeof d!=="string")throw Error("Referenced element not a string (it was "+JSON.stringify(d)+")");q[r]=d.slice(0,h)+b.si+d.slice(h)}else if(b.sd!==e){if(typeof d!=="string")throw Error("Referenced element not a string");if(d.slice(h,h+b.sd.length)!==b.sd)throw Error("Deleted string does not match");q[r]=d.slice(0,h)+d.slice(h+
b.sd.length)}else if(b.li!==e&&b.ld!==e)g.a(d),d[h]=b.li;else if(b.li!==e)g.a(d),d.splice(h,0,b.li);else if(b.ld!==e)g.a(d),d.splice(h,1);else if(b.lm!==e)g.a(d),b.lm!==h&&(f=d[h],d.splice(h,1),d.splice(b.lm,0,f));else if(b.oi!==e)g.b(d),d[h]=b.oi;else if(b.od!==e)g.b(d),delete d[h];else throw Error("invalid / missing instruction in op");}}catch(t){throw t;}return i.data};g.h=function(c,a){var b,g,f;if(c.length!==a.length)return!1;for(b=0,f=c.length;b<f;b++)if(g=c[b],g!==a[b])return!1;return!0};g.append=
function(c,a){var b,a=l(a);return c.length!==0&&g.h(a.p,(b=c[c.length-1]).p)?b.na!==e&&a.na!==e?c[c.length-1]={p:b.p,na:b.na+a.na}:b.li!==e&&a.li===e&&a.ld===b.li?b.ld!==e?delete b.li:c.pop():b.od!==e&&b.oi===e&&a.oi!==e&&a.od===e?b.oi=a.oi:a.lm!==e&&a.p[a.p.length-1]===a.lm?n:c.push(a):c.push(a)};g.compose=g.k=function(c,a){var b,i,f,d;i=l(c);for(f=0,d=a.length;f<d;f++)b=a[f],g.append(i,b);return i};g.normalize=g.normalize=function(c){var a,b,i,f;b=[];o(c)||(c=[c]);for(i=0,f=c.length;i<f;i++)a=c[i],
a.p==n&&(a.p=[]),g.append(b,a);return b};l=function(c){return JSON.parse(JSON.stringify(c))};g.e=function(c,a){var b,c=c.slice(),a=a.slice();c.unshift("data");a.unshift("data");c=c.slice(0,c.length-1);a=a.slice(0,a.length-1);if(a.length===0)return-1;for(b=0;c[b]===a[b]&&b<c.length;)if(b++,b===a.length)return b-1};g.f=function(c,a,b,i){var f,d,k,h,j,a=l(a);a.na!==e&&a.p.push(0);b.na!==e&&b.p.push(0);f=g.e(a.p,b.p);d=g.e(b.p,a.p);h=a.p.length;k=b.p.length;a.na!==e&&a.p.pop();b.na!==e&&b.p.pop();if(b.na){if(d!=
n&&k>=h&&b.p[d]===a.p[d])if(a.ld!==e)d=l(b),d.p=d.p.slice(h),a.ld=g.apply(l(a.ld),[d]);else if(a.od!==e)d=l(b),d.p=d.p.slice(h),a.od=g.apply(l(a.od),[d]);g.append(c,a);return c}if(d!=n&&k>h&&a.p[d]===b.p[d])if(a.ld!==e)d=l(b),d.p=d.p.slice(h),a.ld=g.apply(l(a.ld),[d]);else if(a.od!==e)d=l(b),d.p=d.p.slice(h),a.od=g.apply(l(a.od),[d]);if(f!=n&&(d=h===k,b.na===e))if(b.si!==e||b.sd!==e){if(a.si!==e||a.sd!==e){if(!d)throw Error("must be a string?");k=function(a){var b;b={p:a.p[a.p.length-1]};a.si?b.i=
a.si:b.d=a.sd;return b};h=[];p._tc(h,k(a),k(b),i);for(k=0,d=h.length;k<d;k++)i=h[k],b={p:a.p.slice(0,f)},b.p.push(i.p),i.i!=n&&(b.si=i.i),i.d!=n&&(b.sd=i.d),g.append(c,b);return c}}else if(b.li!==e&&b.ld!==e){if(b.p[f]===a.p[f])if(d){if(a.ld!==e)if(a.li!==e&&i==="left")a.ld=l(b.li);else return c}else return c}else if(b.li!==e)a.li!==e&&a.ld===e&&d&&a.p[f]===b.p[f]?i==="right"&&a.p[f]++:b.p[f]<=a.p[f]&&a.p[f]++,a.lm!==e&&d&&b.p[f]<=a.lm&&a.lm++;else if(b.ld!==e){if(a.lm!==e&&d){if(b.p[f]===a.p[f])return c;
i=b.p[f];d=a.p[f];j=a.lm;(i<j||i===j&&d<j)&&a.lm--}if(b.p[f]<a.p[f])a.p[f]--;else if(b.p[f]===a.p[f])if(k<h)return c;else if(a.ld!==e)if(a.li!==e)delete a.ld;else return c}else if(b.lm!==e)if(a.lm!==e&&h===k){if(d=a.p[f],j=a.lm,h=b.p[f],b=b.lm,h!==b)if(d===h)if(i==="left")a.p[f]=b,d===j&&(a.lm=b);else return c;else d>h&&a.p[f]--,d>b?a.p[f]++:d===b&&h>b&&(a.p[f]++,d===j&&a.lm++),j>h?a.lm--:j===h&&j>d&&a.lm--,j>b?a.lm++:j===b&&(b>h&&j>d||b<h&&j<d?i==="right"&&a.lm++:j>d?a.lm++:j===h&&a.lm--)}else a.li!==
e&&a.ld===e&&d?(d=b.p[f],j=b.lm,i=a.p[f],i>d&&a.p[f]--,i>j&&a.p[f]++):(d=b.p[f],j=b.lm,i=a.p[f],i===d?a.p[f]=j:(i>d&&a.p[f]--,i>j?a.p[f]++:i===j&&d>j&&a.p[f]++));else if(b.oi!==e&&b.od!==e){if(a.p[f]===b.p[f])if(a.oi!==e&&d)if(i==="right")return c;else a.od=b.oi;else return c}else if(b.oi!==e){if(a.oi!==e&&a.p[f]===b.p[f])if(i==="left")g.append(c,{p:a.p,od:b.oi});else return c}else if(b.od!==e&&a.p[f]===b.p[f]){if(!d)return c;if(a.oi!==e)delete a.od;else return c}g.append(c,a);return c};typeof!0!==
"undefined"?(m.types||(m.types={}),m._bt(g,g.f,g.c,g.append),m.types.json=g):(module.l=g,require("./helpers").j(g,g.f,g.c,g.append))}).call(this);