<html>
	<head>
		<link href="style.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div id="container">
			<div id='text' class='content'></div>
		</div>
		<script src="/socket.io/socket.io.js" type="text/javascript"></script>
		<script src="../lib/markdown/showdown.js" type="text/javascript"></script>
		<script src="/share.js" type="text/javascript"></script>
		<script type="text/javascript">
	// To convert markdown -> HTML
	var converter = new Showdown.converter();

	var elem = document.getElementById('text');
	var connection = new sharejs.Connection(window.location.hostname, 8000);

	connection.getOrCreate('hello', 'text', function(doc, error) {
		if(error) {
			console.error(error);
		} else {
			if (window.console) {
				console.log("Document open");
			}
			document.title = doc.name

			// doc.submitOp([{i:'Hi ', p:0}]);

			var update = function() {
				elem.innerHTML = converter.makeHtml(doc.snapshot);
			}

			update();
			doc.subscribe('change', update);
		}
	});
		</script>
	</body>
</html>
