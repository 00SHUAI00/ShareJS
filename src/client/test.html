<html>
	<head>
	<body>
		<h1>
			The 'hello' document.
		</h1>
		<pre style='font-family: monospace; white-space: pre-wrap;' id='text'></pre>
		<script src="http://localhost:8000/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="../../webclient.js"></script>
		<script type="text/javascript">
/*	ds.open('sarah', 0, function(data) {
			console.log('the document has been opened', data);
			});

	ds.on('sarah', 'op', function(data) {
			console.log('op', data);
		});
 */

	var set = function(str) {
		div = document.getElementById('text');
		div.innerText = str;
	}

	var connection = new whatnot.Connection('localhost', 8000);
	connection.getOrCreate('sarahtest', 'text', function(doc, error) {
		if(error) {
			console.error(error);
		} else {
			console.log("Document open");

			doc.submitOp([{i:'Hi ', p:0}]);
			set(doc.snapshot);

			doc.onChanged(function(op) {
				console.log('recieved op: ', op);
				set(doc.snapshot);
			});
		}
	});

//	ds.submit('hi', {'type':'text'}, 0, function() {


		</script>
	</body>
</html>
