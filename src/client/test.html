<html>
	<head>
	<body>
		<h1>
			Hi there
		</h1>
		<div id='text'></div>
		<script src="http://localhost:8000/socket.io/socket.io.js"></script>
		<script type="text/javascript" src="../../webclient.js"></script>
		<script type="text/javascript">
/*	ds.open('sarah', 0, function(data) {
			console.log('the document has been opened', data);
			});

	ds.on('sarah', 'op', function(data) {
			console.log('op', data);
		});
 */

	var set = function(str) {
		div = document.getElementById('text');
		div.textContent = str;
	}

	var connection = new ot.Connection('localhost', 8000);
	var doc = connection.getOrCreate('hello', ot.types.text);

	doc.onOpen(function(error) {
		if(error) {
			console.error(error);
		} else {
			console.log("Document open");

			var op = ot.types.text.normalize([{'i':'hi '}, doc.snapshot.length]);
			doc.submitOp(op, doc.version);
			set(doc.snapshot);
		}
	});

	doc.onOp(function(op) {
		console.log('recieved op: ', op);
		set(doc.snapshot);
	});

//	ds.submit('hi', {'type':'text'}, 0, function() {


		</script>
	</body>
</html>
